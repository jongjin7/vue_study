##1. 최근 대화목록
###1.1 검색
- 대화자 검색 : 매칭되는 대화자와 대화 내용을 포함하는 Document를 대화 목록에 정렬
- 대화 내용 검색 : 매칭되는 내용을 포함하는 Document를 대화 목록에 정렬

###1.2 목록
- 최근 대화자 목록화
- 1:1 대화 내용 저장
  - 대화내용
  - 최종 대화 날짜
  - 프로필 정보

** 선택하면 해당 채팅방에 출력
 
  
##2.채팅방 내용
###2.1 상대방 대화
- 프로필 정보
- 대화 내용 블록
  - 대화 내용
  - 대화 전송 날짜, 시간

###2.2 나의 대화
- 대화 내용 블록
  - 대화 내용
  - 대화 전송 날짜, 시간
  
##3. 대화 입력 폼
- 메시지 입력 전송
- html 변환 전송

### 프로세스
* 기본 저장은 로컬 스토리지 이용
입력 --> 대화창 내용 갱신 이벤트 --> 리스트 갱신 
*서버에 대화 내용 저장
성공 --> 대화방 참여자에게 메시지 전달
실패 --> 실패된 대화 항목을 리스트로 로컬 스토리지에 저장 후 마킹해줌(카톡)
        !!!실패한 대화 내용은 서로에게 전송 안되게 막기


1. 대화목록은?
대화목록에는 상대방의 최종 메시지를 보여주고, 리스트 집입시 대화내용 뷰화면에 뿌려주기
대화자와 대화시 리스트 갱신

2. 대화창은?
내용 입력시 서버에 메시지를 저장후 각 대화창에 내용 갱신(빠른 결과 반영을 위하여 로컬에 선 적용 후, 서버에 후 반영)
스크롤 위치 갱신

3. 대화용 DB정의
채팅방 (상대 대화자 이름으로 채팅방 개설) 생성
- 참여장 정보(a,b)
- 대화 내용

4.DB구조
로그인 된 사용자와 대화한 대화  목록만 가져온다.
myChat > chatRoomList > chatRoom1, chatRoom2, chatRoom3...

chatRoom1 => 
{
 dialogist: user1, user2 //datalink, user2는 로그인 대상자
 messages: [ //시간으로 정렬
      { 메시지 저장 시간, 대화메시지, 대화자 },
      { 메시지 저장 시간, 대화메시지, 대화자 },
      { 메시지 저장 시간, 대화메시지, 대화자 },
                   ... 
     ]
}


// 날짜 블록
날짜 블록으로 일일 메시지 구분
날짜1/날짜2/날짜3...

// 일일 메시지 구조
저장시간     대화자A      대화자B
----------------------------------
시간1       메시지1     
시간2                  메시지2
시간3       메시지3     
시간4                  메시지4
시간5       메시지5
시간6       메시지6     
시간7                  메시지7
시간8       메시지8
시간9                  메시지9
시간10                 메시지10


개인 메시지 구조는 '시간+메시지'로  구성
채팅 사용자a, 사용자b 순위는 시간으로 정렬



 

  
